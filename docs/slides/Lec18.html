<!DOCTYPE html>
<html lang="en"><head>
<script src="Lec18_files/libs/clipboard/clipboard.min.js"></script>
<script src="Lec18_files/libs/quarto-html/tabby.min.js"></script>
<script src="Lec18_files/libs/quarto-html/popper.min.js"></script>
<script src="Lec18_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="Lec18_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Lec18_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="Lec18_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.267">

  <meta name="author" content="Dr.&nbsp;Colin Rundel">
  <title>Spatial Data and Cartography (Part 2)</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="Lec18_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="Lec18_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="Lec18_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="Lec18_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="Lec18_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="Lec18_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="Lec18_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Spatial Data and Cartography (Part 2)</h1>
  <p class="subtitle">Lecture 18</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Dr.&nbsp;Colin Rundel 
</div>
</div>
</div>

</section>
<section>
<section id="plotting" class="title-slide slide level1 center">
<h1>Plotting</h1>

</section>
<section id="example-data---nc-sids" class="slide level2">
<h2>Example Data - NC SIDS</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>( <span class="at">nc =</span> <span class="fu">read_sf</span>(<span class="fu">system.file</span>(<span class="st">"shape/nc.shp"</span>, <span class="at">package=</span><span class="st">"sf"</span>), <span class="at">quiet =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-2"><a href="#cb1-2"></a>    <span class="fu">select</span>(<span class="sc">-</span>(AREA<span class="sc">:</span>CNTY_ID), <span class="sc">-</span>(FIPS<span class="sc">:</span>CRESS_ID)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 100 features and 7 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965
Geodetic CRS:  NAD27
# A tibble: 100 × 8
   NAME        BIR74 SID74 NWBIR74 BIR79 SID79 NWBIR79
   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 Ashe         1091     1      10  1364     0      19
 2 Alleghany     487     0      10   542     3      12
 3 Surry        3188     5     208  3616     6     260
 4 Currituck     508     1     123   830     2     145
 5 Northampton  1421     9    1066  1606     3    1197
 6 Hertford     1452     7     954  1838     5    1237
 7 Camden        286     0     115   350     2     139
 8 Gates         420     0     254   594     2     371
 9 Warren        968     4     748  1190     2     844
10 Stokes       1612     1     160  2038     5     176
# … with 90 more rows, and 1 more variable:
#   geometry &lt;MULTIPOLYGON [°]&gt;</code></pre>
</div>
</div>
</section>
<section id="base-plots" class="slide level2">
<h2>Base Plots</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">plot</span>(nc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-2-1.png" class="r-stretch quarto-figure-center"></section>
<section id="geometry-plot" class="slide level2">
<h2>Geometry Plot</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(nc), <span class="at">axes=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-3-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="graticules" class="slide level2">
<h2>Graticules</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">plot</span>(nc[,<span class="st">"SID79"</span>], <span class="at">axes=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-4-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="graticules-1" class="slide level2">
<h2>Graticules</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">plot</span>(nc[,<span class="st">"SID79"</span>], <span class="at">graticule=</span><span class="fu">st_crs</span>(nc), <span class="at">axes=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-5-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="graticules-epsg3631" class="slide level2">
<h2>Graticules (EPSG:3631)</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">plot</span>(<span class="fu">st_transform</span>(nc[,<span class="st">"SID79"</span>], <span class="dv">3631</span>), <span class="at">axes=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-6-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="graticules-epsg3631-1" class="slide level2">
<h2>Graticules (EPSG:3631)</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">plot</span>(<span class="fu">st_transform</span>(nc[,<span class="st">"SID79"</span>], <span class="dv">3631</span>), <span class="at">graticule=</span><span class="fu">st_crs</span>(nc), <span class="at">axes=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-7-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="graticules-epsg3631-2" class="slide level2">
<h2>Graticules (EPSG:3631)</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">plot</span>(<span class="fu">st_transform</span>(nc[,<span class="st">"SID79"</span>], <span class="dv">3631</span>), <span class="at">graticule=</span><span class="fu">st_crs</span>(<span class="dv">3631</span>), <span class="at">axes=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-8-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="ggplot2" class="slide level2">
<h2>ggplot2</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">ggplot</span>(nc) <span class="sc">+</span> </span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>SID79))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-9-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="ggplot2-projections" class="slide level2">
<h2>ggplot2 + projections</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">ggplot</span>(<span class="fu">st_transform</span>(nc, <span class="dv">3631</span>)) <span class="sc">+</span> </span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>SID79 <span class="sc">/</span> BIR79))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-10-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="ggplot2-viridis" class="slide level2">
<h2>ggplot2 + viridis</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">ggplot</span>(<span class="fu">st_transform</span>(nc, <span class="dv">3631</span>)) <span class="sc">+</span> </span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>SID79 <span class="sc">/</span> BIR79)) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="fu">scale_fill_viridis_c</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-11-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="example-data---meuse" class="slide level2">
<h2>Example Data - Meuse</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">data</span>(meuse, meuse.riv, <span class="at">package=</span><span class="st">"sp"</span>)</span>
<span id="cb13-2"><a href="#cb13-2"></a>(<span class="at">meuse =</span> <span class="fu">st_as_sf</span>(meuse, <span class="at">coords=</span><span class="fu">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>), <span class="at">crs=</span><span class="dv">28992</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> <span class="fu">st_as_sf</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 155 features and 12 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 178605 ymin: 329714 xmax: 181390 ymax: 333611
Projected CRS: Amersfoort / RD New
# A tibble: 155 × 13
   cadmium copper  lead  zinc  elev    dist    om ffreq
     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;
 1    11.7     85   299  1022  7.91 0.00136  13.6 1    
 2     8.6     81   277  1141  6.98 0.0122   14   1    
 3     6.5     68   199   640  7.8  0.103    13   1    
 4     2.6     81   116   257  7.66 0.190     8   1    
 5     2.8     48   117   269  7.48 0.277     8.7 1    
 6     3       61   137   281  7.79 0.364     7.8 1    
 7     3.2     31   132   346  8.22 0.190     9.2 1    
 8     2.8     29   150   406  8.49 0.0922    9.5 1    
 9     2.4     37   133   347  8.67 0.185    10.6 1    
10     1.6     24    80   183  9.05 0.310     6.3 1    
# … with 145 more rows, and 5 more variables: soil &lt;fct&gt;,
#   lime &lt;fct&gt;, landuse &lt;fct&gt;, dist.m &lt;dbl&gt;,
#   geometry &lt;POINT [m]&gt;</code></pre>
</div>
</div>
</section>
<section id="section" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>( <span class="at">meuse_riv =</span> <span class="fu">st_polygon</span>(<span class="fu">list</span>(meuse.riv)) <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>    <span class="fu">st_sfc</span>() <span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>    <span class="fu">st_set_crs</span>(<span class="dv">28992</span>) <span class="sc">|&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>    <span class="fu">st_as_sf</span>()</span>
<span id="cb15-5"><a href="#cb15-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 178304 ymin: 325698.5 xmax: 182331.5 ymax: 337684.8
Projected CRS: Amersfoort / RD New
                               x
1 POLYGON ((182003.7 337678.6...</code></pre>
</div>
</div>
</section>
<section id="meuse" class="slide level2">
<h2>Meuse</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">plot</span>(meuse, <span class="at">pch=</span><span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-14-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="layering-plots" class="slide level2">
<h2>Layering plots</h2>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">plot</span>(meuse_riv, <span class="at">col=</span><span class="fu">adjustcolor</span>(<span class="st">"lightblue"</span>, <span class="at">alpha.f=</span><span class="dv">1</span>), <span class="at">border =</span> <span class="cn">NA</span>, </span>
<span id="cb18-2"><a href="#cb18-2"></a>     <span class="at">axes=</span><span class="cn">TRUE</span>, <span class="at">graticule=</span><span class="fu">st_crs</span>(<span class="dv">4326</span>), </span>
<span id="cb18-3"><a href="#cb18-3"></a>     <span class="at">xlim=</span><span class="fu">st_bbox</span>(meuse)[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)], <span class="at">ylim=</span><span class="fu">st_bbox</span>(meuse)[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)])</span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="fu">plot</span>(meuse[,<span class="st">"lead"</span>], <span class="at">pch=</span><span class="dv">16</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Lec18_files/figure-revealjs/unnamed-chunk-15-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="ggplot2-1" class="slide level2">
<h2>ggplot2</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>meuse_riv, <span class="at">fill=</span><span class="st">"lightblue"</span>, <span class="at">color=</span><span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>meuse, <span class="fu">aes</span>(<span class="at">color=</span>lead), <span class="at">size=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-16-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="ggplot2---axis-limits" class="slide level2">
<h2>ggplot2 - axis limits</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>meuse_riv, <span class="at">fill=</span><span class="st">"lightblue"</span>, <span class="at">color=</span><span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>meuse, <span class="fu">aes</span>(<span class="at">color=</span>lead), <span class="at">size=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4"></a>  <span class="fu">ylim</span>(<span class="fl">50.95</span>, <span class="fl">50.99</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-17-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="ggplot2---axis-limits-1" class="slide level2">
<h2>ggplot2 - axis limits</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>meuse_riv, <span class="at">fill=</span><span class="st">"lightblue"</span>, <span class="at">color=</span><span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>meuse, <span class="fu">aes</span>(<span class="at">color=</span>lead), <span class="at">size=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>  <span class="fu">ylim</span>(<span class="dv">329714</span>, <span class="dv">333611</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-18-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="ggplot2---bounding-box" class="slide level2 t">
<h2>ggplot2 - bounding box</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span><span class="fu">st_sf</span>(meuse_riv), <span class="at">fill=</span><span class="st">"lightblue"</span>, <span class="at">color=</span><span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>meuse, <span class="fu">aes</span>(<span class="at">color=</span>lead), <span class="at">size=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>  <span class="fu">ylim</span>(<span class="fu">st_bbox</span>(meuse)[<span class="st">"ymin"</span>], <span class="fu">st_bbox</span>(meuse)[<span class="st">"ymax"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-19-1.png" width="960" class="r-stretch quarto-figure-center"></section></section>
<section>
<section id="geometry-predicates" class="title-slide slide level1 center">
<h1>Geometry Predicates</h1>

</section>
<section id="de-9im" class="slide level2">
<h2>DE-9IM</h2>

<img data-src="imgs/de_9im.png" style="width:100.0%" class="r-stretch quarto-figure-center"></section>
<section id="spatial-predicates" class="slide level2">
<h2>Spatial predicates</h2>

<img data-src="imgs/predicates.png" style="width:100.0%" class="r-stretch quarto-figure-center"><div class="small">
<p><code>st_within(a,b)</code>:</p>
<p><span class="math display">\[
\begin{bmatrix}
T &amp; * &amp; F \\
* &amp; * &amp; F \\
* &amp; * &amp; *
\end{bmatrix}
\]</span></p>
<p><code>st_touches(a,b)</code>:</p>
<p><span class="math display">\[
\begin{bmatrix} F &amp; T &amp; * \\ * &amp; * &amp; * \\ * &amp; * &amp; * \end{bmatrix} \cup
\begin{bmatrix} F &amp; * &amp; * \\ T &amp; * &amp; * \\ * &amp; * &amp; * \end{bmatrix} \cup
\begin{bmatrix} F &amp; * &amp; * \\ * &amp; T &amp; * \\ * &amp; * &amp; * \end{bmatrix}
\]</span></p>
</div>
</section>
<section id="sparse-vs-full-results" class="slide level2">
<h2>Sparse vs Full Results</h2>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">st_intersects</span>(ncc[<span class="dv">20</span><span class="sc">:</span><span class="dv">30</span>,], air) <span class="sc">%&gt;%</span> <span class="fu">str</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 11
 $ : int(0) 
 $ : int(0) 
 $ : int(0) 
 $ : int(0) 
 $ : int(0) 
 $ : int 268
 $ : int 717
 $ : int(0) 
 $ : int(0) 
 $ : int(0) 
 $ : int(0) 
 - attr(*, "predicate")= chr "intersects"
 - attr(*, "region.id")= chr [1:11] "1" "2" "3" "4" ...
 - attr(*, "remove_self")= logi FALSE
 - attr(*, "retain_unique")= logi FALSE
 - attr(*, "ncol")= int 940
 - attr(*, "class")= chr [1:2] "sgbp" "list"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">st_intersects</span>(ncc, air, <span class="at">sparse=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">str</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> logi [1:100, 1:940] FALSE FALSE FALSE FALSE FALSE FALSE ...</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="examples" class="slide level2">
<h2>Examples</h2>
<ul>
<li><p>Which counties have an airport?</p></li>
<li><p>Which counties are adjacent to Durham County?</p></li>
<li><p>Which counties have more than 4 neighbors?</p></li>
</ul>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>ncc  <span class="ot">=</span> <span class="fu">read_sf</span>(<span class="st">"data/gis/nc_counties/"</span>, <span class="at">quiet=</span><span class="cn">TRUE</span>)</span>
<span id="cb27-2"><a href="#cb27-2"></a>air <span class="ot">=</span> <span class="fu">read_sf</span>(<span class="st">"data/gis/airports/"</span>, <span class="at">quiet=</span><span class="cn">TRUE</span>) <span class="sc">|&gt;</span> <span class="fu">st_transform</span>(<span class="fu">st_crs</span>(ncc))</span>
<span id="cb27-3"><a href="#cb27-3"></a>hwy <span class="ot">=</span> <span class="fu">read_sf</span>(<span class="st">"data/gis/us_interstates/"</span>, <span class="at">quiet=</span><span class="cn">TRUE</span>) <span class="sc">|&gt;</span> <span class="fu">st_transform</span>(<span class="fu">st_crs</span>(ncc))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="which-counties-have-an-airport" class="slide level2">
<h2>Which counties have an airport?</h2>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>ncc <span class="sc">|&gt;</span></span>
<span id="cb28-2"><a href="#cb28-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-3"><a href="#cb28-3"></a>    <span class="at">airports =</span> <span class="fu">st_intersects</span>(ncc, air) <span class="sc">|&gt;</span> <span class="fu">strip_attrs</span>(),</span>
<span id="cb28-4"><a href="#cb28-4"></a>    <span class="at">n_airports =</span> purrr<span class="sc">::</span><span class="fu">map_int</span>(airports, length)</span>
<span id="cb28-5"><a href="#cb28-5"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb28-6"><a href="#cb28-6"></a>  <span class="fu">filter</span>(n_airports <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 16 features and 10 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -82.88783 ymin: 33.92835 xmax: -75.46003 ymax: 36.26165
Geodetic CRS:  NAD83
# A tibble: 16 × 11
     AREA PERIM…¹ COUNT…² STATE COUNTY FIPS  STATE…³ SQUAR…⁴
 *  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;
 1 0.107     1.54    2065 NC    Forsy… 37067 37         413.
 2 0.170     1.69    2069 NC    Guilf… 37081 37         658.
 3 0.0996    6.15    2077 NC    Dare … 37055 37         386.
 4 0.221     2.14    2106 NC    Wake … 37183 37         858.
 5 0.169     2.12    2151 NC    Pitt … 37147 37         654.
 6 0.106     1.56    2152 NC    Cataw… 37035 37         413.
 7 0.170     2.37    2153 NC    Bunco… 37021 37         660.
 8 0.143     1.71    2197 NC    Wayne… 37191 37         557.
 9 0.140     1.92    2209 NC    Meckl… 37119 37         547.
10 0.181     2.16    2210 NC    Moore… 37125 37         706.
11 0.0937    1.36    2212 NC    Cabar… 37025 37         365.
12 0.103     1.63    2231 NC    Lenoi… 37107 37         403.
13 0.185     4.15    2236 NC    Crave… 37049 37         722.
14 0.169     2.05    2260 NC    Cumbe… 37051 37         659.
15 0.195     4.53    2314 NC    Onslo… 37133 37         766.
16 0.0519    2.23    2408 NC    New H… 37129 37         205.
# … with 3 more variables: geometry &lt;MULTIPOLYGON [°]&gt;,
#   airports &lt;list&gt;, n_airports &lt;int&gt;, and abbreviated
#   variable names ¹​PERIMETER, ²​COUNTYP010, ³​STATE_FIPS,
#   ⁴​SQUARE_MIL</code></pre>
</div>
</div>
</div>
</section>
<section id="which-counties-are-adjacent-to-durham-county" class="slide level2">
<h2>Which counties are adjacent to Durham County?</h2>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>ncc <span class="sc">|&gt;</span></span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb30-3"><a href="#cb30-3"></a>    <span class="at">touch_durham =</span> <span class="fu">st_touches</span>(ncc, ncc <span class="sc">|&gt;</span> <span class="fu">filter</span>(COUNTY <span class="sc">==</span> <span class="st">"Durham County"</span>)) <span class="sc">|&gt;</span> <span class="fu">strip_attrs</span>(),</span>
<span id="cb30-4"><a href="#cb30-4"></a>    <span class="at">n_touches =</span> <span class="fu">map_int</span>(touch_durham, length)</span>
<span id="cb30-5"><a href="#cb30-5"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb30-6"><a href="#cb30-6"></a>  <span class="fu">filter</span>(n_touches <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 5 features and 10 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -79.55573 ymin: 35.51505 xmax: -78.25503 ymax: 36.54245
Geodetic CRS:  NAD83
# A tibble: 5 × 11
   AREA PERIMETER COUNT…¹ STATE COUNTY FIPS  STATE…² SQUAR…³
* &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;
1 0.105      1.30    2006 NC    Perso… 37145 37         404.
2 0.139      1.69    2008 NC    Granv… 37077 37         536.
3 0.104      1.30    2074 NC    Orang… 37135 37         401.
4 0.221      2.14    2106 NC    Wake … 37183 37         858.
5 0.183      2.26    2141 NC    Chath… 37037 37         710.
# … with 3 more variables: geometry &lt;MULTIPOLYGON [°]&gt;,
#   touch_durham &lt;list&gt;, n_touches &lt;int&gt;, and abbreviated
#   variable names ¹​COUNTYP010, ²​STATE_FIPS, ³​SQUARE_MIL</code></pre>
</div>
</div>
</div>
</section>
<section id="which-counties-have-more-than-4-neighbors" class="slide level2">
<h2>Which counties have more than 4 neighbors?</h2>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>ncc <span class="sc">|&gt;</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb32-3"><a href="#cb32-3"></a>    <span class="at">neighbors =</span> <span class="fu">st_touches</span>(ncc) <span class="sc">|&gt;</span> <span class="fu">strip_attrs</span>(),</span>
<span id="cb32-4"><a href="#cb32-4"></a>    <span class="at">n_neighbors =</span> <span class="fu">map_int</span>(neighbors, length)</span>
<span id="cb32-5"><a href="#cb32-5"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb32-6"><a href="#cb32-6"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> n_neighbors <span class="sc">&gt;</span> <span class="dv">4</span>)) <span class="sc">+</span></span>
<span id="cb32-7"><a href="#cb32-7"></a>    <span class="fu">geom_sf</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Lec18_files/figure-revealjs/unnamed-chunk-26-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="geometry-manipulation" class="title-slide slide level1 center">
<h1>Geometry Manipulation</h1>

</section>
<section id="casting" class="slide level2">
<h2>Casting</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>(<span class="at">nc_pts =</span> <span class="fu">st_cast</span>(nc, <span class="st">"MULTIPOINT"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 100 features and 7 fields
Geometry type: MULTIPOINT
Dimension:     XY
Bounding box:  xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965
Geodetic CRS:  NAD27
# A tibble: 100 × 8
   NAME        BIR74 SID74 NWBIR74 BIR79 SID79 NWBIR79
   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 Ashe         1091     1      10  1364     0      19
 2 Alleghany     487     0      10   542     3      12
 3 Surry        3188     5     208  3616     6     260
 4 Currituck     508     1     123   830     2     145
 5 Northampton  1421     9    1066  1606     3    1197
 6 Hertford     1452     7     954  1838     5    1237
 7 Camden        286     0     115   350     2     139
 8 Gates         420     0     254   594     2     371
 9 Warren        968     4     748  1190     2     844
10 Stokes       1612     1     160  2038     5     176
# … with 90 more rows, and 1 more variable:
#   geometry &lt;MULTIPOINT [°]&gt;</code></pre>
</div>
</div>
</section>
<section id="section-1" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(nc), <span class="at">border=</span><span class="st">'grey'</span>)</span>
<span id="cb35-2"><a href="#cb35-2"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(nc_pts), <span class="at">pch=</span><span class="dv">16</span>, <span class="at">cex=</span><span class="fl">0.5</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-28-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="casting---point" class="slide level2">
<h2>Casting - POINT</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="fu">st_cast</span>(nc, <span class="st">"POINT"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 2529 features and 7 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965
Geodetic CRS:  NAD27
# A tibble: 2,529 × 8
   NAME  BIR74 SID74 NWBIR74 BIR79 SID79 NWBIR79
   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 Ashe   1091     1      10  1364     0      19
 2 Ashe   1091     1      10  1364     0      19
 3 Ashe   1091     1      10  1364     0      19
 4 Ashe   1091     1      10  1364     0      19
 5 Ashe   1091     1      10  1364     0      19
 6 Ashe   1091     1      10  1364     0      19
 7 Ashe   1091     1      10  1364     0      19
 8 Ashe   1091     1      10  1364     0      19
 9 Ashe   1091     1      10  1364     0      19
10 Ashe   1091     1      10  1364     0      19
# … with 2,519 more rows, and 1 more variable:
#   geometry &lt;POINT [°]&gt;</code></pre>
</div>
</div>
</section>
<section id="section-2" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(nc), <span class="at">border=</span><span class="st">'grey'</span>)</span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(<span class="fu">st_cast</span>(nc, <span class="st">"POINT"</span>)), <span class="at">pch=</span><span class="dv">16</span>, <span class="at">cex=</span><span class="fl">0.5</span>, <span class="at">add=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-30-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="casting---linestring" class="slide level2">
<h2>Casting - LINESTRING</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="fu">st_cast</span>(nc, <span class="st">"MULTILINESTRING"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 100 features and 7 fields
Geometry type: MULTILINESTRING
Dimension:     XY
Bounding box:  xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965
Geodetic CRS:  NAD27
# A tibble: 100 × 8
   NAME        BIR74 SID74 NWBIR74 BIR79 SID79 NWBIR79
   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 Ashe         1091     1      10  1364     0      19
 2 Alleghany     487     0      10   542     3      12
 3 Surry        3188     5     208  3616     6     260
 4 Currituck     508     1     123   830     2     145
 5 Northampton  1421     9    1066  1606     3    1197
 6 Hertford     1452     7     954  1838     5    1237
 7 Camden        286     0     115   350     2     139
 8 Gates         420     0     254   594     2     371
 9 Warren        968     4     748  1190     2     844
10 Stokes       1612     1     160  2038     5     176
# … with 90 more rows, and 1 more variable:
#   geometry &lt;MULTILINESTRING [°]&gt;</code></pre>
</div>
</div>
</section>
<section id="section-3" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="fu">st_cast</span>(nc, <span class="st">"MULTILINESTRING"</span>) <span class="sc">|&gt;</span> <span class="fu">st_geometry</span>() <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-32-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="grouping-features" class="slide level2">
<h2>Grouping Features</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>nc_state <span class="ot">=</span> <span class="fu">st_union</span>(nc)</span>
<span id="cb42-2"><a href="#cb42-2"></a><span class="fu">plot</span>(nc_state)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-33-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="more-grouping" class="slide level2">
<h2>More Grouping</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>( <span class="at">nc_cut =</span> nc <span class="sc">|&gt;</span></span>
<span id="cb43-2"><a href="#cb43-2"></a>   <span class="fu">mutate</span>(<span class="at">X =</span> <span class="fu">st_centroid</span>(nc) <span class="sc">|&gt;</span> <span class="fu">st_coordinates</span>() <span class="sc">|&gt;</span> (\(x) x[,<span class="dv">1</span>])()) <span class="sc">|&gt;</span></span>
<span id="cb43-3"><a href="#cb43-3"></a>   <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">cut</span>(X, <span class="at">breaks =</span> <span class="dv">5</span>)) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 100 features and 9 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965
Geodetic CRS:  NAD27
# A tibble: 100 × 10
   NAME        BIR74 SID74 NWBIR74 BIR79 SID79 NWBIR79
 * &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 Ashe         1091     1      10  1364     0      19
 2 Alleghany     487     0      10   542     3      12
 3 Surry        3188     5     208  3616     6     260
 4 Currituck     508     1     123   830     2     145
 5 Northampton  1421     9    1066  1606     3    1197
 6 Hertford     1452     7     954  1838     5    1237
 7 Camden        286     0     115   350     2     139
 8 Gates         420     0     254   594     2     371
 9 Warren        968     4     748  1190     2     844
10 Stokes       1612     1     160  2038     5     176
# … with 90 more rows, and 3 more variables:
#   geometry &lt;MULTIPOLYGON [°]&gt;, X &lt;dbl&gt;, region &lt;fct&gt;</code></pre>
</div>
</div>
</section>
<section id="section-4" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="fu">ggplot</span>(nc_cut) <span class="sc">+</span></span>
<span id="cb45-2"><a href="#cb45-2"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>region))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-35-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="dplyr-and-sf" class="slide level2">
<h2>dplyr and sf</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>nc_cut <span class="sc">|&gt;</span> </span>
<span id="cb46-2"><a href="#cb46-2"></a>  <span class="fu">group_by</span>(region) <span class="sc">|&gt;</span> </span>
<span id="cb46-3"><a href="#cb46-3"></a>  <span class="fu">summarize</span>() <span class="sc">|&gt;</span> </span>
<span id="cb46-4"><a href="#cb46-4"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb46-5"><a href="#cb46-5"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>region))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-36-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="affine-transfomations" class="slide level2">
<h2>Affine Transfomations</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a>rotate <span class="ot">=</span> <span class="cf">function</span>(a) <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fu">cos</span>(a), <span class="fu">sin</span>(a), <span class="sc">-</span><span class="fu">sin</span>(a), <span class="fu">cos</span>(a)), <span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb47-2"><a href="#cb47-2"></a></span>
<span id="cb47-3"><a href="#cb47-3"></a>ctrd <span class="ot">=</span> <span class="fu">st_centroid</span>(nc_state)</span>
<span id="cb47-4"><a href="#cb47-4"></a>state_rotate <span class="ot">=</span> (nc_state) <span class="sc">*</span> <span class="fu">rotate</span>(<span class="sc">-</span>pi<span class="sc">/</span><span class="dv">4</span>)</span>
<span id="cb47-5"><a href="#cb47-5"></a><span class="fu">plot</span>(state_rotate, <span class="at">axes=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-37-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="scaling-size" class="slide level2">
<h2>Scaling Size</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>ctrd <span class="ot">=</span> <span class="fu">st_centroid</span>(<span class="fu">st_geometry</span>(nc))</span>
<span id="cb48-2"><a href="#cb48-2"></a>area <span class="ot">=</span> <span class="fu">st_area</span>(nc) <span class="sc">|&gt;</span> <span class="fu">strip_attrs</span>()</span>
<span id="cb48-3"><a href="#cb48-3"></a></span>
<span id="cb48-4"><a href="#cb48-4"></a>nc_rot <span class="ot">=</span> nc</span>
<span id="cb48-5"><a href="#cb48-5"></a><span class="fu">st_geometry</span>(nc_rot) <span class="ot">=</span> (<span class="fu">st_geometry</span>(nc) <span class="sc">-</span> ctrd) <span class="sc">*</span> <span class="fl">0.75</span> <span class="sc">+</span> ctrd</span>
<span id="cb48-6"><a href="#cb48-6"></a></span>
<span id="cb48-7"><a href="#cb48-7"></a><span class="fu">plot</span>(nc_rot[,<span class="st">"SID79"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-38-1.png" width="960" class="r-stretch quarto-figure-center"></section></section>
<section>
<section id="highway-example" class="title-slide slide level1 center">
<h1>Highway Example</h1>

</section>
<section id="highways" class="slide level2">
<h2>Highways</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a>hwy <span class="ot">=</span> <span class="fu">read_sf</span>(<span class="st">"data/us_interstates.gpkg"</span>, <span class="at">quiet =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb49-2"><a href="#cb49-2"></a>  <span class="fu">st_transform</span>(<span class="fu">st_crs</span>(nc))</span>
<span id="cb49-3"><a href="#cb49-3"></a></span>
<span id="cb49-4"><a href="#cb49-4"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb49-5"><a href="#cb49-5"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nc) <span class="sc">+</span></span>
<span id="cb49-6"><a href="#cb49-6"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>hwy, <span class="at">col=</span><span class="st">'red'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Lec18_files/figure-revealjs/unnamed-chunk-39-1.png" style="height:50.0%" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="nc-interstate-highways" class="slide level2">
<h2>NC Interstate Highways</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>hwy_nc <span class="ot">=</span> <span class="fu">st_intersection</span>(hwy, nc)</span>
<span id="cb50-2"><a href="#cb50-2"></a></span>
<span id="cb50-3"><a href="#cb50-3"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb50-4"><a href="#cb50-4"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nc) <span class="sc">+</span></span>
<span id="cb50-5"><a href="#cb50-5"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>hwy_nc, <span class="at">col=</span><span class="st">'red'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-40-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="counties-near-the-interstate-projection" class="slide level2">
<h2>Counties near the interstate (Projection)</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a>nc_utm  <span class="ot">=</span> <span class="fu">st_transform</span>(nc, <span class="st">"+proj=utm +zone=17 +datum=NAD83 +units=m +no_defs"</span>)</span>
<span id="cb51-2"><a href="#cb51-2"></a></span>
<span id="cb51-3"><a href="#cb51-3"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb51-4"><a href="#cb51-4"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nc_utm) <span class="sc">+</span></span>
<span id="cb51-5"><a href="#cb51-5"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>hwy_nc, <span class="at">col=</span><span class="st">'red'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-41-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="counties-near-the-interstate-buffering" class="slide level2">
<h2>Counties near the interstate (Buffering)</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>hwy_nc_buffer <span class="ot">=</span> hwy_nc <span class="sc">|&gt;</span></span>
<span id="cb52-2"><a href="#cb52-2"></a>  <span class="fu">st_transform</span>(<span class="st">"+proj=utm +zone=17 +datum=NAD83 +units=m +no_defs"</span>) <span class="sc">|&gt;</span></span>
<span id="cb52-3"><a href="#cb52-3"></a>  <span class="fu">st_buffer</span>(<span class="dv">10000</span>)</span>
<span id="cb52-4"><a href="#cb52-4"></a></span>
<span id="cb52-5"><a href="#cb52-5"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb52-6"><a href="#cb52-6"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nc_utm) <span class="sc">+</span></span>
<span id="cb52-7"><a href="#cb52-7"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>hwy_nc, <span class="at">color=</span><span class="st">'red'</span>) <span class="sc">+</span></span>
<span id="cb52-8"><a href="#cb52-8"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>hwy_nc_buffer, <span class="at">fill=</span><span class="st">'red'</span>, <span class="at">alpha=</span><span class="fl">0.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-42-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="counties-near-the-interstate-buffering-union" class="slide level2">
<h2>Counties near the interstate (Buffering + Union)</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a>hwy_nc_buffer <span class="ot">=</span> hwy_nc <span class="sc">|&gt;</span></span>
<span id="cb53-2"><a href="#cb53-2"></a>  <span class="fu">st_transform</span>(<span class="st">"+proj=utm +zone=17 +datum=NAD83 +units=m +no_defs"</span>) <span class="sc">|&gt;</span></span>
<span id="cb53-3"><a href="#cb53-3"></a>  <span class="fu">st_buffer</span>(<span class="dv">10000</span>) <span class="sc">|&gt;</span></span>
<span id="cb53-4"><a href="#cb53-4"></a>  <span class="fu">st_union</span>() <span class="sc">|&gt;</span></span>
<span id="cb53-5"><a href="#cb53-5"></a>  <span class="fu">st_sf</span>()</span>
<span id="cb53-6"><a href="#cb53-6"></a>  </span>
<span id="cb53-7"><a href="#cb53-7"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb53-8"><a href="#cb53-8"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nc_utm) <span class="sc">+</span></span>
<span id="cb53-9"><a href="#cb53-9"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>hwy_nc, <span class="at">color=</span><span class="st">'red'</span>) <span class="sc">+</span></span>
<span id="cb53-10"><a href="#cb53-10"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>hwy_nc_buffer, <span class="at">fill=</span><span class="st">'red'</span>, <span class="at">alpha=</span><span class="fl">0.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-43-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="example" class="slide level2">
<h2>Example</h2>
<p>How many counties in North Carolina are within 5, 10, 20, or 50 km of an interstate highway?</p>
</section></section>
<section>
<section id="gerrymandering-example" class="title-slide slide level1 center">
<h1>Gerrymandering Example</h1>

</section>
<section id="nc-house-districts---112th-congress" class="slide level2">
<h2>NC House Districts - 112th Congress</h2>
<div class="medium">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>( <span class="at">nc_house =</span> <span class="fu">read_sf</span>(<span class="st">"data/nc_districts112.gpkg"</span>, <span class="at">quiet =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb54-2"><a href="#cb54-2"></a>    <span class="fu">select</span>(ID, DISTRICT) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 13 features and 2 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -84.32187 ymin: 33.84452 xmax: -75.45998 ymax: 36.58812
Geodetic CRS:  WGS 84
# A tibble: 13 × 3
   ID           DISTRICT                                geom
   &lt;chr&gt;        &lt;chr&gt;                     &lt;MULTIPOLYGON [°]&gt;
 1 037108112001 1        (((-77.32845 35.35031, -77.35398 3…
 2 037108112002 2        (((-78.89928 35.12619, -78.89763 3…
 3 037108112003 3        (((-75.68266 35.23291, -75.68113 3…
 4 037108112004 4        (((-78.77926 35.78568, -78.77947 3…
 5 037108112005 5        (((-79.8968 36.38075, -79.89213 36…
 6 037108112006 6        (((-80.4201 35.68953, -80.41483 35…
 7 037108112007 7        (((-77.59169 34.40907, -77.58699 3…
 8 037108112008 8        (((-78.93373 34.95909, -78.94074 3…
 9 037108112009 9        (((-80.93058 35.18181, -80.9244 35…
10 037108112010 10       (((-81.04032 35.40447, -81.30021 3…
11 037108112011 11       (((-84.00768 35.37262, -84.00831 3…
12 037108112012 12       (((-80.4996 35.6493, -80.51926 35.…
13 037108112013 13       (((-79.90775 36.3818, -79.90694 36…</code></pre>
</div>
</div>
</div>
</section>
<section id="section-5" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a>nc_house <span class="ot">=</span> nc_house <span class="sc">|&gt;</span></span>
<span id="cb56-2"><a href="#cb56-2"></a>  <span class="fu">st_transform</span>(<span class="st">"+proj=utm +zone=17 +datum=NAD83 +units=km +no_defs"</span>)</span>
<span id="cb56-3"><a href="#cb56-3"></a><span class="fu">plot</span>(nc_house[,<span class="st">"DISTRICT"</span>], <span class="at">axes=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-45-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="measuring-compactness---reock-score" class="slide level2">
<h2>Measuring Compactness - Reock Score</h2>
<p>The Reock score is a measure of compactness that is calculated as the the ratio area of a shape to the area of its minimum bounding circle.</p>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a>circs <span class="ot">=</span> nc_house <span class="sc">|&gt;</span> </span>
<span id="cb57-2"><a href="#cb57-2"></a>  lwgeom<span class="sc">::</span><span class="fu">st_minimum_bounding_circle</span>()</span>
<span id="cb57-3"><a href="#cb57-3"></a></span>
<span id="cb57-4"><a href="#cb57-4"></a><span class="fu">plot</span>(circs <span class="sc">|&gt;</span> <span class="fu">filter</span>(DISTRICT <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> <span class="fu">st_geometry</span>(), <span class="at">axes=</span><span class="cn">TRUE</span>)</span>
<span id="cb57-5"><a href="#cb57-5"></a><span class="fu">plot</span>(nc_house <span class="sc">|&gt;</span> <span class="fu">select</span>(DISTRICT) <span class="sc">|&gt;</span> <span class="fu">filter</span>(DISTRICT <span class="sc">==</span> <span class="dv">1</span>), <span class="at">add=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Lec18_files/figure-revealjs/unnamed-chunk-46-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="section-6" class="slide level2">
<h2></h2>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a><span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill=</span>DISTRICT)) <span class="sc">+</span></span>
<span id="cb58-2"><a href="#cb58-2"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>nc_house) <span class="sc">+</span></span>
<span id="cb58-3"><a href="#cb58-3"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>circs, <span class="at">alpha=</span><span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb58-4"><a href="#cb58-4"></a>  <span class="fu">guides</span>(<span class="at">color=</span><span class="st">"none"</span>, <span class="at">fill=</span><span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Lec18_files/figure-revealjs/unnamed-chunk-47-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="calculating-reock" class="slide level2">
<h2>Calculating Reock</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>nc_house <span class="sc">|&gt;</span></span>
<span id="cb59-2"><a href="#cb59-2"></a>  <span class="fu">mutate</span>(<span class="at">reock =</span> (<span class="fu">st_area</span>(nc_house) <span class="sc">/</span> <span class="fu">st_area</span>(circs)) <span class="sc">|&gt;</span> <span class="fu">as.numeric</span>()) <span class="sc">|&gt;</span></span>
<span id="cb59-3"><a href="#cb59-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> reock)) <span class="sc">+</span></span>
<span id="cb59-4"><a href="#cb59-4"></a>    <span class="fu">geom_sf</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-48-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="section-7" class="slide level2">
<h2></h2>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a>nc_house <span class="sc">|&gt;</span></span>
<span id="cb60-2"><a href="#cb60-2"></a>  <span class="fu">mutate</span>(<span class="at">reock =</span> <span class="fu">st_area</span>(nc_house) <span class="sc">/</span> <span class="fu">st_area</span>(circs)) <span class="sc">|&gt;</span></span>
<span id="cb60-3"><a href="#cb60-3"></a>  <span class="fu">arrange</span>(reock) <span class="sc">|&gt;</span></span>
<span id="cb60-4"><a href="#cb60-4"></a>  <span class="fu">print</span>(<span class="at">n=</span><span class="dv">13</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 13 features and 3 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 196.7724 ymin: 3748.368 xmax: 1002.17 ymax: 4057.317
CRS:           +proj=utm +zone=17 +datum=NAD83 +units=km +no_defs
# A tibble: 13 × 4
   ID           DISTRICT                          geom reock
   &lt;chr&gt;        &lt;chr&gt;              &lt;MULTIPOLYGON [km]&gt;   [1]
 1 037108112012 12       (((545.2987 3945.168, 543.52… 0.116
 2 037108112013 13       (((597.9665 4026.852, 598.03… 0.237
 3 037108112003 3        (((984.0709 3911.853, 984.21… 0.266
 4 037108112002 2        (((691.4141 3889.056, 691.55… 0.303
 5 037108112009 9        (((506.3207 3893.208, 506.88… 0.339
 6 037108112008 8        (((688.6584 3870.456, 688.02… 0.342
 7 037108112011 11       (((226.7522 3918.52, 226.716… 0.344
 8 037108112006 6        (((552.4691 3949.669, 552.94… 0.378
 9 037108112001 1        (((833.677 3918.083, 831.446… 0.378
10 037108112005 5        (((598.9504 4026.746, 599.38… 0.399
11 037108112010 10       (((496.339 3917.9, 472.7444 … 0.411
12 037108112004 4        (((700.7063 3962.453, 700.71… 0.480
13 037108112007 7        (((813.3004 3812.784, 813.74… 0.624</code></pre>
</div>
</div>
</div>
</section></section>
<section>
<section id="raster-data-stars" class="title-slide slide level1 center">
<h1>Raster Data (stars)</h1>

</section>
<section id="example-data---meuse-1" class="slide level2">
<h2>Example data - Meuse</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a>( <span class="at">meuse_rast =</span> stars<span class="sc">::</span><span class="fu">read_stars</span>(</span>
<span id="cb62-2"><a href="#cb62-2"></a>    <span class="fu">system.file</span>(<span class="st">"external/test.grd"</span>, <span class="at">package=</span><span class="st">"raster"</span>)</span>
<span id="cb62-3"><a href="#cb62-3"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb62-4"><a href="#cb62-4"></a>    <span class="fu">st_transform</span>(<span class="fu">st_crs</span>(meuse_riv))</span>
<span id="cb62-5"><a href="#cb62-5"></a> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>stars object with 2 dimensions and 1 attribute
attribute(s):
              Min.  1st Qu.   Median    Mean  3rd Qu.
test.grd  138.7071 293.9575 371.9001 425.606 501.0102
              Max. NA's
test.grd  1736.058 6022
dimension(s):
  from  to offset delta              refsys point
x    1  80     NA    NA Amersfoort / RD New    NA
y    1 115     NA    NA Amersfoort / RD New    NA
                      values x/y
x [80x115] 178451,...,181611 [x]
y [80x115] 329530,...,334090 [y]
curvilinear grid</code></pre>
</div>
</div>
</section>
<section id="stars-class" class="slide level2">
<h2>stars class</h2>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a><span class="fu">str</span>(meuse_rast)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 1
 $ test.grd: num [1:80, 1:115] NA NA NA NA NA NA NA NA NA NA ...
 - attr(*, "dimensions")=List of 2
  ..$ x:List of 7
  .. ..$ from  : num 1
  .. ..$ to    : num 80
  .. ..$ offset: num NA
  .. ..$ delta : num NA
  .. ..$ refsys:List of 2
  .. .. ..$ input: chr "EPSG:28992"
  .. .. ..$ wkt  : chr "PROJCRS[\"Amersfoort / RD New\",\n    BASEGEOGCRS[\"Amersfoort\",\n        DATUM[\"Amersfoort\",\n            E"| __truncated__
  .. .. ..- attr(*, "class")= chr "crs"
  .. ..$ point : logi NA
  .. ..$ values: num [1:80, 1:115] 178451 178491 178531 178571 178611 ...
  .. ..- attr(*, "class")= chr "dimension"
  ..$ y:List of 7
  .. ..$ from  : num 1
  .. ..$ to    : num 115
  .. ..$ offset: num NA
  .. ..$ delta : num NA
  .. ..$ refsys:List of 2
  .. .. ..$ input: chr "EPSG:28992"
  .. .. ..$ wkt  : chr "PROJCRS[\"Amersfoort / RD New\",\n    BASEGEOGCRS[\"Amersfoort\",\n        DATUM[\"Amersfoort\",\n            E"| __truncated__
  .. .. ..- attr(*, "class")= chr "crs"
  .. ..$ point : logi NA
  .. ..$ values: num [1:80, 1:115] 334090 334090 334090 334090 334090 ...
  .. ..- attr(*, "class")= chr "dimension"
  ..- attr(*, "raster")=List of 4
  .. ..$ affine     : num [1:2] 0 0
  .. ..$ dimensions : chr [1:2] "x" "y"
  .. ..$ curvilinear: logi TRUE
  .. ..$ blocksizes : NULL
  .. ..- attr(*, "class")= chr "stars_raster"
  ..- attr(*, "class")= chr "dimensions"
 - attr(*, "class")= chr "stars"</code></pre>
</div>
</div>
</div>
</section>
<section id="plotting-1" class="slide level2">
<h2>Plotting</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a><span class="fu">plot</span>(meuse_rast)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-52-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="section-8" class="slide level2">
<h2></h2>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a><span class="fu">plot</span>(</span>
<span id="cb67-2"><a href="#cb67-2"></a>  meuse_riv, </span>
<span id="cb67-3"><a href="#cb67-3"></a>  <span class="at">col=</span><span class="fu">adjustcolor</span>(<span class="st">"lightblue"</span>,<span class="at">alpha.f =</span> <span class="fl">0.5</span>), <span class="at">border=</span><span class="cn">NA</span>,</span>
<span id="cb67-4"><a href="#cb67-4"></a>  <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">329500</span>, <span class="dv">333611</span>), <span class="at">axes=</span><span class="cn">TRUE</span></span>
<span id="cb67-5"><a href="#cb67-5"></a>)</span>
<span id="cb67-6"><a href="#cb67-6"></a><span class="fu">plot</span>(meuse_rast, <span class="at">add=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Lec18_files/figure-revealjs/unnamed-chunk-53-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="ggplot" class="slide level2">
<h2>ggplot</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb68-2"><a href="#cb68-2"></a>  stars<span class="sc">::</span><span class="fu">geom_stars</span>(<span class="at">data=</span>meuse_rast)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-54-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="section-9" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb69-2"><a href="#cb69-2"></a>  stars<span class="sc">::</span><span class="fu">geom_stars</span>(<span class="at">data=</span>meuse_rast) <span class="sc">+</span></span>
<span id="cb69-3"><a href="#cb69-3"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>meuse_riv, <span class="at">fill=</span><span class="st">"lightblue"</span>, <span class="at">color=</span><span class="cn">NA</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb69-4"><a href="#cb69-4"></a>  <span class="fu">ylim</span>(<span class="dv">329500</span>, <span class="dv">333611</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-55-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="section-10" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb70-2"><a href="#cb70-2"></a>  stars<span class="sc">::</span><span class="fu">geom_stars</span>(<span class="at">data=</span>meuse_rast) <span class="sc">+</span></span>
<span id="cb70-3"><a href="#cb70-3"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>meuse_riv, <span class="at">fill=</span><span class="st">"lightblue"</span>, <span class="at">color=</span><span class="cn">NA</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb70-4"><a href="#cb70-4"></a>  <span class="fu">ylim</span>(<span class="dv">329500</span>, <span class="dv">333611</span>) <span class="sc">+</span></span>
<span id="cb70-5"><a href="#cb70-5"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">na.value =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-56-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="rasters-and-projections" class="slide level2">
<h2>Rasters and Projections</h2>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a>meuse_rast_ll <span class="ot">=</span> <span class="fu">st_transform</span>(meuse_rast, <span class="st">"+proj=longlat +datum=NAD83 +no_defs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="columns small">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a><span class="fu">plot</span>(meuse_rast, <span class="at">axes=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Lec18_files/figure-revealjs/unnamed-chunk-58-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a><span class="fu">plot</span>(meuse_rast_ll, <span class="at">axes=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Lec18_files/figure-revealjs/unnamed-chunk-59-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-11" class="slide level2">
<h2></h2>
<div class="columns small">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1"></a>meuse_rast</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>stars object with 2 dimensions and 1 attribute
attribute(s):
              Min.  1st Qu.   Median    Mean  3rd Qu.
test.grd  138.7071 293.9575 371.9001 425.606 501.0102
              Max. NA's
test.grd  1736.058 6022
dimension(s):
  from  to offset delta              refsys point
x    1  80     NA    NA Amersfoort / RD New    NA
y    1 115     NA    NA Amersfoort / RD New    NA
                      values x/y
x [80x115] 178451,...,181611 [x]
y [80x115] 329530,...,334090 [y]
curvilinear grid</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1"></a>meuse_rast_ll</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>stars object with 2 dimensions and 1 attribute
attribute(s):
              Min.  1st Qu.   Median    Mean  3rd Qu.
test.grd  138.7071 293.9575 371.9001 425.606 501.0102
              Max. NA's
test.grd  1736.058 6022
dimension(s):
  from  to offset delta                       refsys point
x    1  80     NA    NA +proj=longlat +datum=NAD8...    NA
y    1 115     NA    NA +proj=longlat +datum=NAD8...    NA
                        values x/y
x [80x115] 5.72143,...,5.76674 [x]
y [80x115] 50.9557,...,50.9968 [y]
curvilinear grid</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="cropping" class="slide level2">
<h2>Cropping</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1"></a>meuse_rast_riv <span class="ot">=</span> meuse_rast[ meuse_riv ]</span>
<span id="cb78-2"><a href="#cb78-2"></a><span class="fu">plot</span>(meuse_rast_riv, <span class="at">axes=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-62-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="segmentation" class="slide level2">
<h2>Segmentation</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a>meuse_rast <span class="sc">|&gt;</span></span>
<span id="cb79-2"><a href="#cb79-2"></a>  <span class="fu">mutate</span>(<span class="at">bins =</span> <span class="fu">cut</span>(test.grd, <span class="dv">3</span>) ) <span class="sc">|&gt;</span></span>
<span id="cb79-3"><a href="#cb79-3"></a>  <span class="fu">select</span>(bins) <span class="sc">|&gt;</span></span>
<span id="cb79-4"><a href="#cb79-4"></a>  <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Lec18_files/figure-revealjs/unnamed-chunk-63-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="polygonization" class="slide level2">
<h2>Polygonization</h2>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1"></a>meuse_rast_poly <span class="ot">=</span> meuse_rast <span class="sc">|&gt;</span></span>
<span id="cb80-2"><a href="#cb80-2"></a>  <span class="fu">mutate</span>(<span class="at">bins =</span> <span class="fu">cut</span>(test.grd, <span class="dv">3</span>) ) <span class="sc">|&gt;</span></span>
<span id="cb80-3"><a href="#cb80-3"></a>  <span class="fu">select</span>(bins) <span class="sc">|&gt;</span></span>
<span id="cb80-4"><a href="#cb80-4"></a>  <span class="fu">st_as_sf</span>()</span>
<span id="cb80-5"><a href="#cb80-5"></a><span class="fu">plot</span>(meuse_rast_poly)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Lec18_files/figure-revealjs/unnamed-chunk-64-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="section-12" class="slide level2">
<h2></h2>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a>meuse_rast_poly <span class="sc">|&gt;</span></span>
<span id="cb81-2"><a href="#cb81-2"></a>  <span class="fu">group_by</span>(bins) <span class="sc">|&gt;</span></span>
<span id="cb81-3"><a href="#cb81-3"></a>  <span class="fu">summarize</span>() <span class="sc">|&gt;</span></span>
<span id="cb81-4"><a href="#cb81-4"></a>  <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="Lec18_files/figure-revealjs/unnamed-chunk-65-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="section-13" class="slide level2">
<h2></h2>
<div class="small">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a>meuse_rast_poly <span class="sc">|&gt;</span></span>
<span id="cb82-2"><a href="#cb82-2"></a>  <span class="fu">group_by</span>(bins) <span class="sc">|&gt;</span></span>
<span id="cb82-3"><a href="#cb82-3"></a>  <span class="fu">summarize</span>() <span class="sc">|&gt;</span></span>
<span id="cb82-4"><a href="#cb82-4"></a>  <span class="fu">mutate</span>(<span class="at">area =</span> <span class="fu">st_area</span>(geometry))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 3 features and 2 fields
Geometry type: GEOMETRY
Dimension:     XY
Bounding box:  xmin: 178431 ymin: 329589.8 xmax: 181590.9 ymax: 333749.8
Projected CRS: Amersfoort / RD New
# A tibble: 3 × 3
  bins                                       geometry   area
* &lt;fct&gt;                                &lt;GEOMETRY [m]&gt;  [m^2]
1 (137,671]          POLYGON ((178551 329829.8, 1785… 4.56e6
2 (671,1.2e+03]      MULTIPOLYGON (((178711 329829.8… 4.74e5
3 (1.2e+03,1.74e+03] MULTIPOLYGON (((179790.9 332189… 5.12e4</code></pre>
</div>
</div>
</div>
<div class="footer footer-default">
<p>Sta 344 - Fall 2022</p>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="Lec18_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="Lec18_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="Lec18_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="Lec18_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="Lec18_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="Lec18_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="Lec18_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="Lec18_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="Lec18_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="Lec18_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>